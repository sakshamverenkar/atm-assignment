"use strict";

const React = require('react');
const {
  Text,
  Box,
  useInput,
  Newline
} = require("ink");
const TextInput = require("ink-text-input").default;
const App = ({
  name = 'Stranger'
}) => {
  const dummyInputData = [];
  const {
    useEffect,
    useState
  } = React;
  const [currentName, setCurrentName] = useState('stranger');
  const [inputFields, setInputFields] = useState({});
  const [currentInput, setCurrentInput] = useState('');
  useInput((input, key) => {
    if (key.return) {
      console.log("rturn key was pressed", currentInput);
      updateDataInState(currentInput);
    }
  });
  const getData = name => {
    name = name || currentName;
    return inputFields[name];
  };
  const createNewNameData = obj => {
    const {
      name,
      balance = 0,
      owedMoney = 0,
      owedFrom = ''
    } = obj;
    return {
      [name]: {
        inputData: [{
          inputType: 'login',
          inputText: `login ${name}`,
          outputText: `Hello, ${name}! \nYour balance is ${balance}`
        }],
        balance: balance,
        owedMoney: owedMoney,
        owedTo: '',
        owedFrom: owedFrom
      }
    };
  };
  const updateDataInState = inputStr => {
    let getDataFromState;
    if (inputStr.includes('login')) {
      const name = inputStr.split(' ')[1];
      if (!name) {
        return;
      }
      const getDataFromState = getData(name);
      if (!getDataFromState) {
        const createdData = createNewNameData({
          name
        });
        setInputFields({
          ...inputFields,
          ...createdData
        });
        setCurrentName(name);
        setCurrentInput('');
      } else {
        const {
          owedMoney,
          owedFrom,
          inputData = []
        } = getDataFromState;
        getDataFromState.inputData = [...inputData, {
          inputType: 'login',
          inputText: inputStr,
          outputText: `Hello, ${name}! \nYour balance is ${getDataFromState.balance}\nOwed ${owedMoney} from ${owedFrom}`
        }];
        setInputFields({
          ...inputFields,
          ...getDataFromState
        });
        setCurrentInput('');
      }
      return 1;
    } else if (inputStr.includes('logout')) {
      getDataFromState = getData();
      const {
        inputData = []
      } = getDataFromState;
      const updatedData = [...inputData, {
        inputType: 'logout',
        inputText: inputStr,
        outputText: `Goodbye, ${currentName}!`
      }];
      if (!getDataFromState) {
        return;
      }
      getDataFromState.inputData = updatedData;
      setInputFields({
        ...inputFields,
        ...getDataFromState
      });
      setCurrentInput('');
      return 1;
    } else if (inputStr.includes('deposit')) {
      const depositAmount = Number(inputStr.split(' ')[1]);
      getDataFromState = getData();
      getDataFromState.balance += depositAmount;
      const {
        inputData = []
      } = getDataFromState;
      const updatedData = [...inputData, {
        inputType: 'deposit',
        inputText: inputStr,
        outputText: `Your balance is ${getDataFromState.balance}`
      }];
      if (!getDataFromState) {
        return;
      }
      getDataFromState.inputData = updatedData;
      setInputFields({
        ...inputFields,
        ...getDataFromState
      });
      setCurrentInput('');
      return 1;
    } else if (inputStr.includes('transfer')) {
      console.log("in transfer");
      const transfereeName = inputStr.split(' ')[1];
      const transferAmt = Number(inputStr.split(' ')[2]);
      getDataFromState = getData();
      let getDataFromStateForTransfer = getData(transfereeName);
      const netBalance = getDataFromState.balance - transferAmt;
      let outputText;
      if (netBalance < 0) {
        getDataFromState.balance = 0;
        getDataFromState.owedMoney = Math.abs(netBalance);
        getDataFromState.owedTo = transfereeName;
        outputText = `Transferred $${transferAmt} to ${transfereeName}\nyour balance is $0\nOwed ${-netBalance} to ${transfereeName}`;
      } else {
        getDataFromState.balance = netBalance;
        outputText = `Transferred $${transferAmt} to ${transfereeName}\nyour balance is $${netBalance}`;
      }
      const {
        inputData = []
      } = getDataFromState;
      const updatedData = [...inputData, {
        inputType: 'transfer',
        inputText: inputStr,
        outputText: outputText
      }];
      let createdData2;
      getDataFromState.inputData = updatedData;
      if (!getDataFromStateForTransfer) {
        getDataFromStateForTransfer = createNewNameData({
          name: transfereeName,
          balance: transferAmt,
          ...(netBalance < 0 ? {
            owedMoney: Math.abs(netBalance),
            owedFrom: currentName
          } : {})
        });
      } else {
        getDataFromStateForTransfer.balance += transferAmt;
        if (netBalance < 0) {
          getDataFromStateForTransfer.owedMoney = Math.abs(netBalance);
          getDataFromStateForTransfer.owedFrom = currentName;
        }
      }
      setInputFields({
        ...inputFields,
        ...getDataFromStateForTransfer,
        ...getDataFromStateForTransfer
      });
      setCurrentInput('');
      return 1;
    }
  };
  const currentData = getData();
  return /*#__PURE__*/React.createElement(Box, {
    flexDirection: 'column'
  }, /*#__PURE__*/React.createElement(Box, {
    flexDirection: 'column'
  }, currentData?.inputData?.map((field, index) => {
    return /*#__PURE__*/React.createElement(Box, {
      flexDirection: 'column',
      key: index
    }, /*#__PURE__*/React.createElement(Text, null, field.inputText), /*#__PURE__*/React.createElement(Text, null, field.outputText), /*#__PURE__*/React.createElement(Newline, null));
  })), /*#__PURE__*/React.createElement(Box, {
    flexDirection: 'column'
  }, /*#__PURE__*/React.createElement(TextInput, {
    placeholder: '',
    value: currentInput,
    onChange: setCurrentInput
  })));
};
module.exports = App;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWFjdCIsInJlcXVpcmUiLCJUZXh0IiwiQm94IiwidXNlSW5wdXQiLCJOZXdsaW5lIiwiVGV4dElucHV0IiwiZGVmYXVsdCIsIkFwcCIsIm5hbWUiLCJkdW1teUlucHV0RGF0YSIsInVzZUVmZmVjdCIsInVzZVN0YXRlIiwiY3VycmVudE5hbWUiLCJzZXRDdXJyZW50TmFtZSIsImlucHV0RmllbGRzIiwic2V0SW5wdXRGaWVsZHMiLCJjdXJyZW50SW5wdXQiLCJzZXRDdXJyZW50SW5wdXQiLCJpbnB1dCIsImtleSIsInJldHVybiIsImNvbnNvbGUiLCJsb2ciLCJ1cGRhdGVEYXRhSW5TdGF0ZSIsImdldERhdGEiLCJjcmVhdGVOZXdOYW1lRGF0YSIsIm9iaiIsImJhbGFuY2UiLCJvd2VkTW9uZXkiLCJvd2VkRnJvbSIsImlucHV0RGF0YSIsImlucHV0VHlwZSIsImlucHV0VGV4dCIsIm91dHB1dFRleHQiLCJvd2VkVG8iLCJpbnB1dFN0ciIsImdldERhdGFGcm9tU3RhdGUiLCJpbmNsdWRlcyIsInNwbGl0IiwiY3JlYXRlZERhdGEiLCJ1cGRhdGVkRGF0YSIsImRlcG9zaXRBbW91bnQiLCJOdW1iZXIiLCJ0cmFuc2ZlcmVlTmFtZSIsInRyYW5zZmVyQW10IiwiZ2V0RGF0YUZyb21TdGF0ZUZvclRyYW5zZmVyIiwibmV0QmFsYW5jZSIsIk1hdGgiLCJhYnMiLCJjcmVhdGVkRGF0YTIiLCJjdXJyZW50RGF0YSIsIm1hcCIsImZpZWxkIiwiaW5kZXgiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsidWkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5jb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5jb25zdCB7IFRleHQsIEJveCwgdXNlSW5wdXQsIE5ld2xpbmUgfSA9IHJlcXVpcmUoXCJpbmtcIik7XG5jb25zdCBUZXh0SW5wdXQgPSByZXF1aXJlKFwiaW5rLXRleHQtaW5wdXRcIikuZGVmYXVsdDtcblxuY29uc3QgQXBwID0gKHtuYW1lID0gJ1N0cmFuZ2VyJ30pID0+IHtcblx0Y29uc3QgZHVtbXlJbnB1dERhdGEgPSBbXVxuXHRjb25zdCB7dXNlRWZmZWN0LCB1c2VTdGF0ZX0gPSBSZWFjdDtcblx0Y29uc3QgW2N1cnJlbnROYW1lLCBzZXRDdXJyZW50TmFtZV0gPSB1c2VTdGF0ZSgnc3RyYW5nZXInKTtcblx0Y29uc3QgW2lucHV0RmllbGRzLCBzZXRJbnB1dEZpZWxkc10gPSB1c2VTdGF0ZSh7fSk7XG5cdGNvbnN0IFtjdXJyZW50SW5wdXQsIHNldEN1cnJlbnRJbnB1dF0gPSB1c2VTdGF0ZSgnJyk7XG5cblx0dXNlSW5wdXQoKGlucHV0LCBrZXkpID0+IHtcblx0XHRpZihrZXkucmV0dXJuKSB7XG5cdFx0XHRjb25zb2xlLmxvZyhcInJ0dXJuIGtleSB3YXMgcHJlc3NlZFwiLCBjdXJyZW50SW5wdXQpXG5cdFx0XHR1cGRhdGVEYXRhSW5TdGF0ZShjdXJyZW50SW5wdXQpXG5cdFx0fVxuXG5cdH0pO1xuXG5cblx0Y29uc3QgZ2V0RGF0YSA9IChuYW1lKSA9PiB7XG5cdFx0bmFtZSA9IG5hbWUgfHwgY3VycmVudE5hbWU7XG5cdFx0cmV0dXJuIGlucHV0RmllbGRzW25hbWVdO1xuXHR9XG5cdGNvbnN0IGNyZWF0ZU5ld05hbWVEYXRhID0gKG9iaikgPT4ge1xuXHRcdGNvbnN0eyBuYW1lLCBiYWxhbmNlID0gMCwgb3dlZE1vbmV5PTAsIG93ZWRGcm9tPSAnJ30gPSBvYmo7XG5cdFx0IHJldHVybiB7XG5cdFx0XHRbbmFtZV0gOiB7XG5cdFx0XHRcdGlucHV0RGF0YTogW3tcblx0XHRcdFx0XHRpbnB1dFR5cGU6ICdsb2dpbicsXG5cdFx0XHRcdFx0aW5wdXRUZXh0OiBgbG9naW4gJHtuYW1lfWAsXG5cdFx0XHRcdFx0b3V0cHV0VGV4dDogYEhlbGxvLCAke25hbWV9ISBcXG5Zb3VyIGJhbGFuY2UgaXMgJHtiYWxhbmNlfWBcblx0XHRcdFx0fV0sXG5cdFx0XHRcdGJhbGFuY2U6YmFsYW5jZSxcblx0XHRcdFx0b3dlZE1vbmV5OiBvd2VkTW9uZXksXG5cdFx0XHRcdG93ZWRUbzogJycsXG5cdFx0XHRcdG93ZWRGcm9tOiBvd2VkRnJvbSxcblx0XHRcdH1cblx0XHR9XG5cdFx0fVxuXG5cblx0Y29uc3QgIHVwZGF0ZURhdGFJblN0YXRlID0gKGlucHV0U3RyKSA9PiB7XG5cdFx0bGV0IGdldERhdGFGcm9tU3RhdGU7XG5cdFx0XHRpZihpbnB1dFN0ci5pbmNsdWRlcygnbG9naW4nKSkge1xuXHRcdFx0XHRjb25zdCBuYW1lID0gaW5wdXRTdHIuc3BsaXQoJyAnKVsxXVxuXHRcdFx0XHRpZighbmFtZSkge1xuXHRcdFx0XHRcdHJldHVybiA7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29uc3QgZ2V0RGF0YUZyb21TdGF0ZSA9IGdldERhdGEobmFtZSlcblx0XHRcdFx0aWYoIWdldERhdGFGcm9tU3RhdGUpIHtcblx0XHRcdFx0XHRjb25zdCBjcmVhdGVkRGF0YSA9IGNyZWF0ZU5ld05hbWVEYXRhKHtuYW1lfSkgO1xuXHRcdFx0XHRcdHNldElucHV0RmllbGRzKHsuLi5pbnB1dEZpZWxkcywgLi4uY3JlYXRlZERhdGF9KVxuXHRcdFx0XHRcdHNldEN1cnJlbnROYW1lKG5hbWUpXG5cdFx0XHRcdFx0c2V0Q3VycmVudElucHV0KCcnKVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvbnN0IHtvd2VkTW9uZXksIG93ZWRGcm9tLFxuXHRcdFx0XHRcdFx0aW5wdXREYXRhID0gW119ID0gZ2V0RGF0YUZyb21TdGF0ZVxuXHRcdFx0XHRcdGdldERhdGFGcm9tU3RhdGUuaW5wdXREYXRhID0gWy4uLmlucHV0RGF0YSxcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0aW5wdXRUeXBlOiAnbG9naW4nLFxuXHRcdFx0XHRcdFx0XHRpbnB1dFRleHQ6IGlucHV0U3RyLFxuXHRcdFx0XHRcdFx0XHRvdXRwdXRUZXh0OiBgSGVsbG8sICR7bmFtZX0hIFxcbllvdXIgYmFsYW5jZSBpcyAke2dldERhdGFGcm9tU3RhdGUuYmFsYW5jZX1cXG5Pd2VkICR7b3dlZE1vbmV5fSBmcm9tICR7b3dlZEZyb219YFxuXHRcdFx0XHRcdFx0fV1cblx0XHRcdFx0XHRzZXRJbnB1dEZpZWxkcyh7Li4uaW5wdXRGaWVsZHMsIC4uLmdldERhdGFGcm9tU3RhdGV9KVxuXHRcdFx0XHRcdHNldEN1cnJlbnRJbnB1dCgnJylcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gMTtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYoaW5wdXRTdHIuaW5jbHVkZXMoJ2xvZ291dCcpKSB7XG5cdFx0XHRcdGdldERhdGFGcm9tU3RhdGUgPSAgZ2V0RGF0YSgpXG5cdFx0XHRcdGNvbnN0IHtpbnB1dERhdGEgPSBbXX0gPSBnZXREYXRhRnJvbVN0YXRlO1xuXHRcdFx0XHRjb25zdCB1cGRhdGVkRGF0YSA9IFsuLi5pbnB1dERhdGEsXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0aW5wdXRUeXBlOiAnbG9nb3V0Jyxcblx0XHRcdFx0XHRcdGlucHV0VGV4dDogaW5wdXRTdHIsXG5cdFx0XHRcdFx0XHRvdXRwdXRUZXh0OiBgR29vZGJ5ZSwgJHtjdXJyZW50TmFtZX0hYFxuXHRcdFx0XHRcdH1dXG5cdFx0XHRcdGlmKCFnZXREYXRhRnJvbVN0YXRlKSB7XG5cdFx0XHRcdFx0cmV0dXJuXG5cdFx0XHRcdH1cblx0XHRcdFx0Z2V0RGF0YUZyb21TdGF0ZS5pbnB1dERhdGEgPSB1cGRhdGVkRGF0YTtcblx0XHRcdFx0c2V0SW5wdXRGaWVsZHMoey4uLmlucHV0RmllbGRzLCAuLi5nZXREYXRhRnJvbVN0YXRlfSlcblx0XHRcdFx0c2V0Q3VycmVudElucHV0KCcnKVxuXHRcdFx0XHRyZXR1cm4gMTtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYoaW5wdXRTdHIuaW5jbHVkZXMoJ2RlcG9zaXQnKSkge1xuXHRcdFx0XHRjb25zdCBkZXBvc2l0QW1vdW50ID0gTnVtYmVyKGlucHV0U3RyLnNwbGl0KCcgJylbMV0pXG5cdFx0XHRcdGdldERhdGFGcm9tU3RhdGUgPSBnZXREYXRhKClcblx0XHRcdFx0Z2V0RGF0YUZyb21TdGF0ZS5iYWxhbmNlICs9IGRlcG9zaXRBbW91bnQ7XG5cdFx0XHRcdGNvbnN0IHtpbnB1dERhdGEgPSBbXX0gPSBnZXREYXRhRnJvbVN0YXRlO1xuXHRcdFx0XHRjb25zdCB1cGRhdGVkRGF0YSA9IFsuLi5pbnB1dERhdGEsXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0aW5wdXRUeXBlOiAnZGVwb3NpdCcsXG5cdFx0XHRcdFx0XHRpbnB1dFRleHQ6IGlucHV0U3RyLFxuXHRcdFx0XHRcdFx0b3V0cHV0VGV4dDogYFlvdXIgYmFsYW5jZSBpcyAke2dldERhdGFGcm9tU3RhdGUuYmFsYW5jZX1gXG5cdFx0XHRcdFx0fV1cblx0XHRcdFx0aWYoIWdldERhdGFGcm9tU3RhdGUpIHtcblx0XHRcdFx0XHRyZXR1cm5cblx0XHRcdFx0fVxuXHRcdFx0XHRnZXREYXRhRnJvbVN0YXRlLmlucHV0RGF0YSA9IHVwZGF0ZWREYXRhO1xuXG5cdFx0XHRcdHNldElucHV0RmllbGRzKHsuLi5pbnB1dEZpZWxkcywgLi4uZ2V0RGF0YUZyb21TdGF0ZX0pXG5cdFx0XHRcdHNldEN1cnJlbnRJbnB1dCgnJylcblx0XHRcdFx0cmV0dXJuIDE7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmKGlucHV0U3RyLmluY2x1ZGVzKCd0cmFuc2ZlcicpKSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiaW4gdHJhbnNmZXJcIilcblx0XHRcdFx0Y29uc3QgdHJhbnNmZXJlZU5hbWUgPSBpbnB1dFN0ci5zcGxpdCgnICcpWzFdXG5cdFx0XHRcdGNvbnN0IHRyYW5zZmVyQW10ID0gTnVtYmVyKGlucHV0U3RyLnNwbGl0KCcgJylbMl0pO1xuXHRcdFx0XHRnZXREYXRhRnJvbVN0YXRlID0gZ2V0RGF0YSgpXG5cdFx0XHRcdGxldCBnZXREYXRhRnJvbVN0YXRlRm9yVHJhbnNmZXIgPSBnZXREYXRhKHRyYW5zZmVyZWVOYW1lKVxuXHRcdFx0XHRjb25zdCBuZXRCYWxhbmNlID0gZ2V0RGF0YUZyb21TdGF0ZS5iYWxhbmNlIC10cmFuc2ZlckFtdDtcblx0XHRcdFx0bGV0IG91dHB1dFRleHQ7XG5cdFx0XHRcdGlmKG5ldEJhbGFuY2UgPDApIHtcblx0XHRcdFx0XHRnZXREYXRhRnJvbVN0YXRlLmJhbGFuY2UgPSAwO1xuXHRcdFx0XHRcdGdldERhdGFGcm9tU3RhdGUub3dlZE1vbmV5ID0gTWF0aC5hYnMobmV0QmFsYW5jZSk7XG5cdFx0XHRcdFx0Z2V0RGF0YUZyb21TdGF0ZS5vd2VkVG8gPSB0cmFuc2ZlcmVlTmFtZTtcblx0XHRcdFx0XHRvdXRwdXRUZXh0ID0gYFRyYW5zZmVycmVkICQke3RyYW5zZmVyQW10fSB0byAke3RyYW5zZmVyZWVOYW1lfVxcbnlvdXIgYmFsYW5jZSBpcyAkMFxcbk93ZWQgJHstbmV0QmFsYW5jZX0gdG8gJHt0cmFuc2ZlcmVlTmFtZX1gXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Z2V0RGF0YUZyb21TdGF0ZS5iYWxhbmNlID0gbmV0QmFsYW5jZTtcblx0XHRcdFx0XHRvdXRwdXRUZXh0ID0gYFRyYW5zZmVycmVkICQke3RyYW5zZmVyQW10fSB0byAke3RyYW5zZmVyZWVOYW1lfVxcbnlvdXIgYmFsYW5jZSBpcyAkJHtuZXRCYWxhbmNlfWBcblx0XHRcdFx0fVxuXHRcdFx0XHRjb25zdCB7aW5wdXREYXRhID0gW119ID0gZ2V0RGF0YUZyb21TdGF0ZTtcblx0XHRcdFx0Y29uc3QgdXBkYXRlZERhdGEgPSBbLi4uaW5wdXREYXRhLFxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGlucHV0VHlwZTogJ3RyYW5zZmVyJyxcblx0XHRcdFx0XHRcdGlucHV0VGV4dDogaW5wdXRTdHIsXG5cdFx0XHRcdFx0XHRvdXRwdXRUZXh0OiBvdXRwdXRUZXh0XG5cdFx0XHRcdFx0fV1cblx0XHRcdFx0bGV0IGNyZWF0ZWREYXRhMiA7XG5cdFx0XHRcdGdldERhdGFGcm9tU3RhdGUuaW5wdXREYXRhID0gdXBkYXRlZERhdGFcblx0XHRcdFx0aWYoIWdldERhdGFGcm9tU3RhdGVGb3JUcmFuc2Zlcikge1xuXG5cdFx0XHRcdFx0Z2V0RGF0YUZyb21TdGF0ZUZvclRyYW5zZmVyID0gY3JlYXRlTmV3TmFtZURhdGEoXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdG5hbWU6dHJhbnNmZXJlZU5hbWUsXG5cdFx0XHRcdFx0XHRcdGJhbGFuY2U6dHJhbnNmZXJBbXQsXG5cdFx0XHRcdFx0XHRcdC4uLihuZXRCYWxhbmNlIDwwID8ge293ZWRNb25leSA6IE1hdGguYWJzKG5ldEJhbGFuY2UpLFxuXHRcdFx0XHRcdFx0XHRcdG93ZWRGcm9tOiBjdXJyZW50TmFtZX0gOiB7fSlcblx0XHRcdFx0XHRcdH0pIDtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGdldERhdGFGcm9tU3RhdGVGb3JUcmFuc2Zlci5iYWxhbmNlICs9IHRyYW5zZmVyQW10XG5cdFx0XHRcdFx0aWYobmV0QmFsYW5jZSA8IDApIHtcblx0XHRcdFx0XHRcdGdldERhdGFGcm9tU3RhdGVGb3JUcmFuc2Zlci5vd2VkTW9uZXkgPSBNYXRoLmFicyhuZXRCYWxhbmNlKVxuXHRcdFx0XHRcdFx0Z2V0RGF0YUZyb21TdGF0ZUZvclRyYW5zZmVyLm93ZWRGcm9tID0gY3VycmVudE5hbWVcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0c2V0SW5wdXRGaWVsZHMoey4uLmlucHV0RmllbGRzLCAuLi5nZXREYXRhRnJvbVN0YXRlRm9yVHJhbnNmZXIsXG5cdFx0XHRcdC4uLmdldERhdGFGcm9tU3RhdGVGb3JUcmFuc2Zlcn0pXG5cdFx0XHRcdHNldEN1cnJlbnRJbnB1dCgnJylcblx0XHRcdFx0cmV0dXJuIDE7XG5cdFx0XHR9XG5cdH1cblxuXHRjb25zdCBjdXJyZW50RGF0YSA9IGdldERhdGEoKTtcblx0cmV0dXJuIChcblx0XHQ8Qm94IGZsZXhEaXJlY3Rpb249eydjb2x1bW4nfT5cblx0XHRcdDxCb3ggZmxleERpcmVjdGlvbj17J2NvbHVtbid9PlxuXHRcdFx0e2N1cnJlbnREYXRhPy5pbnB1dERhdGE/Lm1hcCgoZmllbGQsIGluZGV4KT0+IHtcblx0XHRcdFx0cmV0dXJuKFxuXHRcdFx0XHRcdDxCb3ggZmxleERpcmVjdGlvbj17J2NvbHVtbid9XG5cdFx0XHRcdFx0XHQga2V5PXtpbmRleH0+XG5cdFx0XHRcdFx0XHQ8VGV4dD5cblx0XHRcdFx0XHRcdFx0e2ZpZWxkLmlucHV0VGV4dH1cblx0XHRcdFx0XHRcdDwvVGV4dD5cblx0XHRcdFx0XHRcdDxUZXh0PlxuXHRcdFx0XHRcdFx0XHR7ZmllbGQub3V0cHV0VGV4dH1cblx0XHRcdFx0XHRcdDwvVGV4dD5cblx0XHRcdFx0XHRcdDxOZXdsaW5lIC8+XG5cdFx0XHRcdFx0PC9Cb3g+XG5cdFx0XHRcdClcblx0XHRcdH0pfVxuXHRcdFx0PC9Cb3g+XG5cdFx0XHQ8Qm94IGZsZXhEaXJlY3Rpb249eydjb2x1bW4nfT5cblx0XHRcdFx0PFRleHRJbnB1dFxuXHRcdFx0XHRcdHBsYWNlaG9sZGVyPXsnJ31cblx0XHRcdFx0XHR2YWx1ZT17Y3VycmVudElucHV0fVxuXHRcdFx0XHRcdG9uQ2hhbmdlPXtzZXRDdXJyZW50SW5wdXR9XG5cdFx0XHRcdC8+XG5cdFx0XHQ8L0JveD5cblx0XHQ8L0JveD5cblx0KVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBBcHA7XG4iXSwibWFwcGluZ3MiOiJBQUFBLFlBQVk7O0FBQ1osTUFBTUEsS0FBSyxHQUFHQyxPQUFPLENBQUMsT0FBTyxDQUFDO0FBQzlCLE1BQU07RUFBRUMsSUFBSTtFQUFFQyxHQUFHO0VBQUVDLFFBQVE7RUFBRUM7QUFBUSxDQUFDLEdBQUdKLE9BQU8sQ0FBQyxLQUFLLENBQUM7QUFDdkQsTUFBTUssU0FBUyxHQUFHTCxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQ00sT0FBTztBQUVuRCxNQUFNQyxHQUFHLEdBQUcsQ0FBQztFQUFDQyxJQUFJLEdBQUc7QUFBVSxDQUFDLEtBQUs7RUFDcEMsTUFBTUMsY0FBYyxHQUFHLEVBQUU7RUFDekIsTUFBTTtJQUFDQyxTQUFTO0lBQUVDO0VB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